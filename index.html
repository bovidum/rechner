<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<title>Feierabend- &amp; Zeitkonto-Rechner (inkl. Winterdienst und Rundspruch)</title>
<style>
    :root{
      --orange:#ff9800;
      --orange-dark:#f57c00;
      --winter:#1e73be;
      --winter-dark:#155a92;
      --grey:#7a7a7a;
      --grey-dark:#5f5f5f;

      --bg1:#fff7e6;
      --bg2:#f3f3f3;
      --bg3:#e9e9e9;

      --card:#ffffff;
      --text:#333333;
      --muted:#6b6b6b;
      --border:#e0e0e0;
    }
    *{box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Segoe UI Emoji","Apple Color Emoji","Noto Color Emoji",sans-serif}
    body{
      margin:0;
      padding:16px;
      background:radial-gradient(circle at top,var(--bg1) 0,var(--bg2) 45%,var(--bg3) 100%);
      color:var(--text);
    }
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(320px,1fr));
      gap:16px;
      align-items:start;
    }
    .card{
  width:360px;

      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow:0 8px 18px rgba(0,0,0,.10);
      overflow:hidden;
    }
    .header{
      padding:14px 16px;
      font-weight:900;
      font-size:1.05rem;
      color:#fff;
      text-align:center;
      letter-spacing:.2px;
    }
    .header.orange{background:var(--orange-dark)}
    .header.winter{background:var(--winter-dark)}
    .header.grey{background:var(--grey-dark)}

    .content{padding:16px 16px 14px}
    h2{
      margin:0 0 10px;
      font-size:1rem;
      text-align:center;
      color:inherit;
      opacity:.95;
      font-weight:800;
    }
    .hint{
      font-size:.84rem;
      color:#555;
      line-height:1.35;
      margin:8px 0 12px;
      padding:10px 12px;
      border:1px solid #bdbdbd;
      border-radius:10px;
      background:#f7f7f7;
    
  

  white-space: normal;
}
    .hint br{display:none;}
    .hint .hint-intro{
      display:block;
      font-weight:800;
      color:#333;
      margin-bottom: 0;
    
  margin:0;
  padding:0;
}
    .row{display:flex;flex-direction:column;margin-bottom:10px}
    label{font-size:.92rem;font-weight:800;margin-bottom:4px}
    small{font-size:.78rem;color:#6b6b6b}
    input[type="time"], input[type="number"]{
      padding:8px 10px;
      font-size:1rem;
      border-radius:12px;
      border:1px solid #bdbdbd;
      width:360px;
      max-width:100%;
      background:#fff;
      color:#222;
    }
    input[type="number"]{width:220px}
    select{
      padding:8px 10px;
      font-size:1rem;
      border-radius:12px;
      border:1px solid #bdbdbd;
      max-width:100%;
      background:#fff;
      color:#222;
    }
    .btn-row{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}
    button{
      border-radius:999px;
      border:none;
      padding:9px 14px;
      font-size:.92rem;
      cursor:pointer;
      font-weight:800;
      display:inline-flex;
      align-items:center;
      gap:3px;
    }
    .btn-main{background:var(--orange);color:#fff;box-shadow:0 3px 6px rgba(0,0,0,.18)}
    .btn-main.orange{background:var(--orange)}
    .btn-main.winter{background:var(--winter)}
    .btn-main.grey{background:var(--grey)}
    .btn-ghost{
      background:#fff;
      border:1px solid #cfcfcf;
      color:#555;
      box-shadow:none;
    }
    .btn-main:active{transform:translateY(1px)}
    .error{color:#c62828;font-size:.86rem;margin-top:8px}
    .results{margin-top:12px;padding-top:12px;border-top:1px dashed #cfcfcf}
    .result-row{display:flex;justify-content:space-between;gap:3px;align-items:baseline;margin-bottom:9px}
    .result-label{font-size:.92rem;font-weight:800}
    .result-value{
      font-size:1.02rem;
      font-weight:900;
      text-decoration:underline;
      text-decoration-thickness:2px;
      white-space:nowrap;
    }
    .result-value.orange{color:var(--orange-dark)}
    .result-value.winter{color:var(--winter-dark)}
    .result-label.sub{font-size:.78rem;font-weight:600;color:#666}
    .result-value.sub{font-size:.85rem;font-weight:700;color:#555;text-decoration:none;opacity:.9}
    .note{
      margin-top:10px;
      border-radius:12px;
      padding:10px 12px;
      font-size:.92rem;
      line-height:1.35;
      display:none;
    }
    .note.ok{background:#e8f5e9;color:#1b5e20;border:1px solid #c8e6c9}
    .note.warn{background:#fff8e1;color:#6d4c00;border:1px solid #ffe082}
    .decimal{font-size:.78rem;color:#666;text-decoration:none;margin-top:2px}
    .footer{
      margin-top:10px;
      text-align:center;
      color:#888;
      font-size:.78rem;
      padding:0 0 2px;
    }
    .pill{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      font-size:.78rem;
      font-weight:800;
      border:1px solid rgba(0,0,0,.12);
      background:#fafafa;
      color:#555;
      margin-left:6px;
    }
    .snow{margin-right:6px}
  
    .global-footer{
      margin:14px auto 0;
      max-width:360px;
      width:100%;
      text-align:center;
      color:#666;
      font-size:.82rem;
      line-height:1.35;
      padding:12px 10px;
    }
    .global-footer a{ color:#1565c0; text-decoration:none; }
    .global-footer a:hover{ text-decoration:underline; }
    .global-footer .small{ margin-top:6px; font-size:.78rem; color:#777; }

  

/* Hilfboxen: Aufz√§hlung sauber untereinander */
.hint ul.hint-list{margin:6px 0 0 18px;padding:0;}
.hint ul.hint-list li{margin:0 !important;padding:0 !important;line-height:1.25;}

/* Hinweis-Info-Zeile (eigene Zeile unter der Liste) */
.hint .hint-info{margin-top:6px;color:#555;line-height:1.35;}


.global-footer{
  margin:14px auto 0;
  max-width:360px;
  width:100%;
  text-align:center;
  color:#333;
  font-size:.88rem;
  line-height:1.45;
  padding:12px 10px;
  font-weight:600;
}
.global-footer b{
  font-weight:900;
}
.global-footer a{
  color:#1565c0;
  font-weight:800;
  text-decoration:none;
}
.global-footer a:hover{
  text-decoration:underline;
}
.global-footer .small{
  margin-top:6px;
  font-size:.82rem;
  color:#444;
}

</style>
</head>
<body>
<div class="grid">
<!-- Rechner 1 -->
<section class="card" data-calc="r1">
<div class="header orange">Rechner 1 - Dienstende-Wunsch nach Uhrzeit</div>
<div class="content">
<h2>Feierabend zu einer bestimmten gew√ºnschten Uhrzeit</h2>
<div class="hint"><strong class="hint-intro">Kolleg:in m√∂chte zu einer gew√ºnschten Uhrzeit den Dienst beenden.</strong><br/><b style="margin:0;padding:0;display:block;">Rechner zeigt dir:</b><ul class="hint-list"><li>Dienstende (inkl. Duschen)</li><li>Beginn der Duschzeit</li><li>Tageszettel</li><li>Entnahme vom Zeitkonto</li></ul></div>
<div class="row">
<label for="r1_start">Dienstbeginn</label>
<input id="r1_start" type="time"/>
<small>z. B. 05:30</small>
</div>
<div class="row">
<label for="r1_wunsch">Dienstende (Wunsch)</label>
<input id="r1_wunsch" type="time"/>
<small>z. B. 10:30 (Kollege geht um 10:30 Uhr)</small>
</div>
<div class="row">
<label for="r1_fix">Dienstzeit (fix)</label>
<div class="inputs-inline">
<input id="r1_fix" type="time" value="07:48"/>
<small>Standard: 7:48 h</small>
</div>
</div>
<div class="row">
<label for="r1_pause">Pause</label>
<div class="inputs-inline">
<input id="r1_pause" type="time" value="00:30"/>
<small>Standard: 0:30 h (falls keine Pause: 00:00)</small>
</div>
</div>
<div class="btn-row">
<button class="btn-main" onclick="r1_calc()" type="button">üëâ Berechnen</button>
<button class="btn-ghost" onclick="r1_reset()" type="button">‚ôªÔ∏è Zur√ºcksetzen</button>
</div>
<div class="error" id="r1_err"></div>
<div class="results" id="r1_results" style="display:none;">
<div class="result-row">
<div class="result-label">Dienstende (inkl. Duschen)</div>
<div class="result-value orange" id="r1_wishEnd"></div>
</div>
<div class="result-row">
<div class="result-label">Beginn Duschzeit</div>
<div class="result-value" id="r1_showerStart"></div>
</div>
<div class="result-row">
<div class="result-label">Tageszettel</div>
<div class="result-value" id="r1_tages"></div>
</div>
<div class="result-row">
<div class="result-label sub">Tageszettel (dezimal)</div>
<div class="result-value sub" id="r1_tages_dec"></div>
</div>
<div class="result-row">
<div class="result-label">Zeitkonto-Entnahme</div>
<div class="result-value" id="r1_take"></div>
</div>
<div class="result-row">
<div class="result-label sub">Zeitkonto-Entnahme (dezimal)</div>
<div class="result-value sub" id="r1_take_dec"></div>
</div>
</div>
<div class="footer">Entwickelt von Max VR13</div>
</div>
</section>
<section class="card" data-calc="r2">
<div class="header orange">Rechner 2 - Dienstende bei Zeitkonto-Entnahme</div>
<div class="content">
<h2>Feierabend nach gew√ºnschter Entnahme vom Stundenkonto</h2>
<div class="hint"><strong class="hint-intro">Kolleg:in w√ºnscht eine Entnahme vom Zeitkonto.</strong><br/><b style="margin:0;padding:0;display:block;">Rechner zeigt dir:</b><ul class="hint-list"><li>Dienstende (inkl. Duschen)</li><li>Beginn der Duschzeit</li><li>Tageszettel</li><li>Entnahme vom Zeitkonto</li></ul></div>
<div class="row">
<label for="r2_start">Dienstbeginn</label>
<input id="r2_start" type="time"/>
<small>z. B. 05:30</small>
</div>
<div class="row">
<label for="r2_takeIn">Entnahme aus dem Zeitkonto</label>
<input id="r2_takeIn" type="time"/>
<small>z. B. 02:00 (Kollege geht 2:00 h fr√ºher)</small>
</div>
<div class="row">
<label for="r2_fix">Dienstzeit (fix)</label>
<input id="r2_fix" type="time" value="07:48"/>
<small>Standard: 07:48</small>
</div>
<!-- Pause als LETZTE Eingabe -->
<div class="row">
<label for="r2_pause">Pause</label>
<input id="r2_pause" type="time" value="00:30"/>
<small>Standard 00:30 ¬∑ wenn keine Pause: 00:00</small>
</div>
<div class="btn-row">
<button class="btn-main orange" onclick="r2_calc()" type="button">üëâ Berechnen</button>
<button class="btn-ghost" onclick="r2_reset()" type="button">‚ôªÔ∏è Zur√ºcksetzen</button>
</div>
<div class="error" id="r2_err"></div>
<div class="results" id="r2_res" style="display:none;">
<div class="result-row">
<div class="result-label">Dienstende (inkl. Duschen)</div>
<div class="result-value orange" id="r2_end"></div>
</div>
<div class="result-row" style="display:none;">
<div class="result-label sub">Regul√§res Ende</div>
<div class="result-value sub" id="r2_regEnd"></div>
</div>
<div class="result-row">
<div class="result-label">Beginn Duschzeit</div>
<div class="result-value" id="r2_duschstart"></div>
</div>
<div class="result-row">
<div class="result-label">Tageszettel</div>
<div class="result-value" id="r2_tz"></div>
</div>
<div class="result-row">
<div class="result-label sub">Tageszettel (dezimal)</div>
<div class="result-value sub" id="r2_tz_dec"></div>
</div>
<div class="result-row">
<div class="result-label">Zeitkonto-Entnahme</div>
<div class="result-value" id="r2_take"></div>
</div>
<div class="result-row">
<div class="result-label sub">Zeitkonto-Entnahme (dezimal)</div>
<div class="result-value sub" id="r2_take_dec"></div>
</div></div>
<div class="footer">Entwickelt von Max VR13</div>
</div></section>
<!-- Rechner 3 -->
<section class="card" data-calc="r3">
<div class="header orange">Rechner 3 - Spontanfeierabend-Jetzt</div>
<div class="content">
<h2>Feierabend wird ‚Äûjetzt‚Äú gew√ºnscht</h2>
<div class="hint"><strong class="hint-intro">Kolleg:in w√ºnscht spontan Feierabend.</strong><br/><b style="margin:0;padding:0;display:block;">Rechner zeigt dir:</b><ul class="hint-list"><li>Dienstende (inkl. Duschen)</li><li>Beginn der Duschzeit</li><li>Tageszettel</li><li>Entnahme vom Zeitkonto</li></ul>
<div class="hint-info">‚ÑπÔ∏è Anfrage gilt hier als Beginn der Duschzeit!</div></div>
<div class="row">
<label for="r3_now">Anfragezeit (jetzt)</label>
<input id="r3_now" type="time"/>
<small>z. B. 12:00 (Kollege m√∂chte jetzt Feierabend machen)</small>
</div>
<div class="row">
<label for="r3_start">Dienstbeginn</label>
<input id="r3_start" type="time"/>
<small>z. B. 05:30</small>
</div>
<!-- Dienstzeit (fix) + Pause als LETZTE Eingaben -->
<div class="row">
<label for="r3_fixWork">Dienstzeit (fix)</label>
<input id="r3_fixWork" type="time" value="07:48"/>
<small>Standard 07:48</small>
</div>
<div class="row">
<label for="r3_pause">Pause</label>
<input id="r3_pause" type="time" value="00:30"/>
<small>Standard 00:30 ¬∑ wenn keine Pause: 00:00</small>
</div>
<div class="btn-row">
<button class="btn-main orange" onclick="r3_calc()" type="button">üëâ Berechnen</button>
<button class="btn-ghost" onclick="r3_reset()" type="button">‚ôªÔ∏è Zur√ºcksetzen</button>
</div>
<div class="error" id="r3_err"></div>
<div class="results" id="r3_res" style="display:none;">
<div class="result-row">
<div class="result-label">Dienstende (inkl. Duschen)</div>
<div class="result-value orange" id="r3_end"></div>
</div>
<div class="result-row">
<div class="result-label">Beginn Duschzeit</div>
<div class="result-value" id="r3_duschstart"></div>
</div>
<div class="result-row">
<div class="result-label">Tageszettel</div>
<div class="result-value" id="r3_tz"></div>
</div>
<div class="result-row">
<div class="result-label sub">Tageszettel (dezimal)</div>
<div class="result-value sub" id="r3_tz_dec"></div>
</div>
<div class="result-row">
<div class="result-label">Zeitkonto-Entnahme</div>
<div class="result-value" id="r3_take"></div>
</div>
<div class="result-row">
<div class="result-label sub">Zeitkonto-Entnahme (dezimal)</div>
<div class="result-value sub" id="r3_take_dec"></div>
</div></div>
<div class="footer">Entwickelt von Max VR13</div>
</div></section>
<!-- Rechner 4 (Winter) -->
<section class="card" data-calc="r4">
<div class="header winter"><span class="snow">‚ùÑÔ∏è</span> Rechner 4 - Dienstende (inkl. Duschen) im Winterdienst</div>
<div class="content">
<h2>Wann ist Feierabend bei variablen Dienstbeginn (optional mit Rundspruch)</h2>
<div class="hint"><strong class="hint-intro">Kolleg:in beginnen zu unterschiedlichen Uhrzeiten ihren Dienst (z.‚ÄØB. nach DAKS).</strong><br/><b style="margin:0;padding:0;display:block;">Rechner zeigt dir:</b><ul class="hint-list"><li>Dienstende (inkl. Duschen)</li><li>Beginn der Duschzeit</li><li>Tageszettel</li><li>Pausenzeit</li><li>nAz / anAz</li></ul>
<div class="hint-info"></div></div>
<div class="row">
<label for="r4_start">Dienstbeginn</label>
<input id="r4_start" type="time"/>
<small>z. B. 05:30</small>
</div>
<div class="row">
<label for="r4_mode">Bitte Rundspruch w√§hlen</label>
<select id="r4_mode">
<option value="none">Kein Rundspruch (Standard 7:48)</option>
<option value="ext">Schichtverl√§ngerung (z. B. 02:00)</option>
<option value="target10plus45">Arbeitszeitverl√§ngerung auf 10:00 (+ 0:45 Pause)</option>
<option value="target12inc">Arbeitszeitverl√§ngerung auf 12:00 (inkl. 0:45 Pause)</option>
</select>
<small>W√§hle optional die Art des Rundspruchs</small>
</div>
<div class="row" id="r4_ext_row">
<label for="r4_ext">Schichtverl√§ngerung (gesamt)</label>
<input id="r4_ext" type="time" value="00:00"/>
<small>z. B. 02:00 (inkl. evtl. 15 Min Pause in der Verl√§ngerung)</small>
</div>
<div class="row" id="r4_target_row" style="display:none;">
<label for="r4_target">Arbeitszeitverl√§ngerung auf (reine Arbeitszeit)</label>
<input id="r4_target" type="time" value="10:00"/>
<small>z. B. 10:00 reine Arbeitszeit (Pause kommt on top)</small>
</div>
<div class="row" id="r4_target10_row" style="display:none;">
<label>Arbeitszeitverl√§ngerung auf 10:00</label>
<small>Hinweis: Die 10:00 sind <b>Arbeitszeit</b>, die Pause von <b>0:45</b> kommt dazu (Duschzeit z√§hlt als Arbeitszeit).</small>
</div>

<div class="row" id="r4_target12_row" style="display:none;">
<label>Arbeitszeitverl√§ngerung auf 12:00</label>
<small>Hinweis: Die 12:00 sind <b>Anwesenheitszeit</b> inkl. <b>0:45 Pause</b> (Duschzeit z√§hlt als Arbeitszeit).</small>
</div>
<div class="btn-row">
<button class="btn-main winter" onclick="r4_calc()" type="button">üëâ Berechnen</button>
<button class="btn-ghost" onclick="r4_reset()" type="button">‚ôªÔ∏è Zur√ºcksetzen</button>
</div>
<div class="error" id="r4_err"></div>
<div class="results" id="r4_res" style="display:none;">







<div class="result-row">
<div class="result-label">Dienstende (inkl. Duschen)</div>
<div class="result-value winter" id="r4_end"></div>
</div><div class="result-row">
<div class="result-label">Beginn Duschzeit</div>
<div class="result-value" id="r4_shower"></div>
</div><div class="result-row">
<div class="result-label">Tageszettel</div>
<div class="result-value" id="r4_tz"></div>
</div><div class="result-row">
<div class="result-label sub">Tageszettel (dezimal)</div>
<div class="result-value sub" id="r4_tz_dec"></div>
</div><div class="result-row">
<div class="result-label">Pause (ArbZG-Minimum)</div>
<div class="result-value" id="r4_pause"></div>
</div><div class="result-row">
<div class="result-label sub">nAZ</div>
<div class="result-value sub" id="r4_naz"></div>
</div><div class="result-row">
<div class="result-label sub">anAZ</div>
<div class="result-value sub" id="r4_anaz"></div>
</div><div class="note" id="r4_note"></div></div>
<div class="footer">Entwickelt von Max VR13</div>
</div>
</section>
<!-- Rechner 5 (Winter) -->
<section class="card" data-calc="r5">
<div class="header winter"><span class="snow">‚ùÑÔ∏è</span> Rechner 5 - Tageszettel-Zeit im Winterdienst</div>
<div class="content">
<h2>Welche Zeit steht auf dem Tageszettel bei Abgabe der Papiere</h2>
<div class="hint"><strong class="hint-intro">Kolleg:in gibt nach Abarbeitung der WD‚ÄëTour (lt. Rundspruch) die Papiere ab und fragt nach der Zeit auf seinem Tageszettel.</strong><br/><b style="margin:0;padding:0;display:block;">Rechner zeigt dir:</b><ul class="hint-list"><li>Dienstende (inkl. Duschen)</li><li>Beginn der Duschzeit</li><li>Tageszettel</li><li>Pausenzeit</li><li>nAz / anAz</li></ul>
<div class="hint-info">‚ÑπÔ∏è Abgabe der Papiere gilt hier als Beginn der Duschzeit!</div></div>
<div class="row">
<label for="r5_start">Dienstbeginn</label>
<input id="r5_start" type="time"/>
<small>z. B. 13:30</small>
</div>
<div class="row">
<label for="r5_paper">Beginn Duschzeit (Papiere abgeben)</label>
<input id="r5_paper" type="time"/>
<small>z. B. 22:45</small>
</div>
<div class="btn-row">
<button class="btn-main winter" onclick="r5_calc()" type="button">üëâ Berechnen</button>
<button class="btn-ghost" onclick="r5_reset()" type="button">‚ôªÔ∏è Zur√ºcksetzen</button>
</div>
<div class="error" id="r5_err"></div>
<div class="results" id="r5_res" style="display:none;">
<div class="result-row">
<div class="result-label">Dienstende (inkl. Duschen)</div>
<div class="result-value winter" id="r5_end"></div>
</div>
<div class="result-row">
<div class="result-label">Beginn Duschzeit</div>
<div class="result-value" id="r5_shower"></div>
</div>
<div class="result-row">
<div class="result-label">Pause (automatisch)</div>
<div class="result-value" id="r5_pause"></div>
</div>
<div class="result-row">
<div class="result-label">Tageszettel</div>
<div class="result-value" id="r5_tz"></div>
</div>
<div class="result-row">
<div class="result-label sub">Tageszettel (dezimal)</div>
<div class="result-value sub" id="r5_tz_dec"></div>
</div>
<div class="result-row">
<div class="result-label sub">nAZ</div>
<div class="result-value sub" id="r5_naz"></div>
</div>
<div class="result-row">
<div class="result-label sub">anAZ</div>
<div class="result-value sub" id="r5_anaz"></div>
</div>
<div class="note" id="r5_note"></div>
</div>
<div class="footer">Entwickelt von Max VR13</div>
</div>
</section>
<script>
  // === Helpers ===
  function parseTimeToMinutes(str){
    if(!str) return NaN;
    const p=str.split(":");
    if(p.length<2) return NaN;
    const h=parseInt(p[0],10), m=parseInt(p[1],10);
    if(Number.isNaN(h)||Number.isNaN(m)||m<0||m>59) return NaN;
    return h*60+m;
  }
  function formatClock(mins){
    mins=((mins%(24*60))+(24*60))%(24*60);
    const h=Math.floor(mins/60), m=mins%60;
    return String(h).padStart(2,"0")+":"+String(m).padStart(2,"0")+" Uhr";
  }
  function formatDuration(mins){
    const sign=mins<0?"-":"";
    mins=Math.abs(mins);
    const h=Math.floor(mins/60), m=mins%60;
    return sign + h + ":" + String(m).padStart(2,"0") + " h";
  }
  function diffClock(a,b){
    let d=a-b;
    if(d<0) d+=24*60;
    return d;
  }
  function fmtDec(mins){
    if(!isFinite(mins)) return "";
    return (mins/60).toFixed(2);
  }

  // Aliases used by some calculators (keeps code readable)
  function byId(id){ return document.getElementById(id); }
function setText(id, value){ const el = byId(id); if(el) el.textContent = value; }
function timeToMin(str){ return parseTimeToMinutes(str); }
  function clock(mins){ return formatClock(mins); }
  function dur(mins){ return formatDuration(mins); }
  function dec(mins){ return fmtDec(mins); }

  // Backwards-compat helpers (older versions used these names)
  function formatDurationSigned(mins){ return formatDuration(mins); }
  function formatDecimalHours(mins){ return fmtDec(mins); }

  // === Constants ===
  const BASE_WORK_MIN = 7*60 + 48; // 7:48
  const DUSCH_MIN = 25;
  const LIMIT_9H = 9*60;
  const PAUSE_30 = 30;
  const PAUSE_45 = 45;

  function pauseByArbzg(workNoPauseMin){
    return (workNoPauseMin > LIMIT_9H) ? PAUSE_45 : PAUSE_30;
  }

// === Rechner 1 === (Dienstende-Wunsch)
function r1_calc(){
  const err = document.getElementById("r1_err");
  err.textContent = "";
  const startMin = parseTimeToMinutes(document.getElementById("r1_start").value);
  const wunschMin = parseTimeToMinutes(document.getElementById("r1_wunsch").value);
  const fixMin = parseTimeToMinutes(document.getElementById("r1_fix").value);
  const pauseMin = parseTimeToMinutes(document.getElementById("r1_pause").value);

  if (isNaN(startMin) || isNaN(wunschMin) || isNaN(fixMin) || isNaN(pauseMin)) {
    err.textContent = "Bitte Dienstbeginn, Dienstende (Wunsch), Dienstzeit (fix) und Pause eingeben.";
    document.getElementById("r1_results").style.display="none";
    return;
  }

  // Zeit auf Tageszettel = (Wunschende - Dienstbeginn) - Pause  (Duschzeit z√§hlt mit, Pause nicht)
  const presenceToWunsch = diffClock(wunschMin, startMin);
  const tagesMin = presenceToWunsch - pauseMin;

  // Entnahme Zeitkonto = Dienstzeit fix - Tageszettel (nicht < 0)
  const takeMin = Math.max(0, fixMin - tagesMin);

  // Regul√§res Ende (mit Duschen) = Dienstbeginn + Dienstzeit fix + Pause
  const regEndMin = startMin + fixMin + pauseMin;

  // Beginn Duschzeit = Wunschende - 25 Min
  const showerStartMin = wunschMin - DUSCH_MIN;

    document.getElementById("r1_wishEnd").textContent = formatClock(wunschMin);
document.getElementById("r1_showerStart").textContent = formatClock(showerStartMin);
  document.getElementById("r1_tages").textContent = formatDurationSigned(tagesMin);
  document.getElementById("r1_take").textContent = formatDurationSigned(takeMin);

  document.getElementById("r1_tages_dec").textContent = fmtDec(tagesMin);
  document.getElementById("r1_take_dec").textContent = fmtDec(takeMin);

  document.getElementById("r1_results").style.display="block";
}
function r1_reset(){
  document.getElementById("r1_start").value="";
  document.getElementById("r1_wunsch").value="";
  document.getElementById("r1_fix").value="07:48";
  document.getElementById("r1_pause").value="00:30";
  document.getElementById("r1_results").style.display="none";
  document.getElementById("r1_err").textContent="";
}

// === Rechner 2 === (Entnahme-Wunsch)
function r2_calc(){
  const err = byId("r2_err"); err.textContent="";
  const start = timeToMin(byId("r2_start").value);
  const fix = timeToMin(byId("r2_fix").value);         // Arbeitszeit (inkl. Duschen), ohne Pause
  const take = timeToMin(byId("r2_takeIn").value);     // Entnahme aus Zeitkonto
  const pause = timeToMin(byId("r2_pause").value);     // Pause kommt "on top"

  if([start,fix,take,pause].some(isNaN)){
    err.textContent="Bitte Dienstbeginn, Dienstzeit (fix), Entnahme und Pause im Format hh:mm eingeben.";
    byId("r2_res").style.display="none";
    return;
  }
  if(take > fix){
    err.textContent="Entnahme darf nicht gr√∂√üer als die Dienstzeit (fix) sein.";
    byId("r2_res").style.display="none";
    return;
  }

  const regEnd = start + fix + pause;      // regul√§res Dienstende (mit Pause)
  const end = regEnd - take;               // tats√§chliches Dienstende (mit Entnahme)
  const shower = end - DUSCH_MIN;          // Beginn Duschzeit
  const tz = fix - take;                   // Tageszettel = Arbeitszeit ohne Pause (Dusche z√§hlt mit)

  setText("r2_regEnd", clock(regEnd));
  byId("r2_end").textContent = clock(end);
  byId("r2_duschstart").textContent = clock(shower);
  byId("r2_take").textContent = dur(take);
  byId("r2_tz").textContent = dur(tz);
  byId("r2_tz_dec").textContent = dec(tz);
  byId("r2_take_dec").textContent = dec(take);

  byId("r2_res").style.display="block";
}
function r2_reset(){
  document.getElementById("r2_start").value="";
  document.getElementById("r2_takeIn").value="";
  document.getElementById("r2_fix").value="07:48";
  document.getElementById("r2_pause").value="00:30";
  document.getElementById("r2_res").style.display="none";
  document.getElementById("r2_err").textContent="";
}
// === Rechner 3 ===
  function r3_calc(){
  const err = byId("r3_err"); err.textContent="";
  const now = timeToMin(byId("r3_now").value);          // Anfragezeit (jetzt) = Beginn Duschzeit
  const start = timeToMin(byId("r3_start").value);      // Dienstbeginn
  const fixWork = timeToMin(byId("r3_fixWork").value);  // Dienstzeit (fix)
  const pause = timeToMin(byId("r3_pause").value);      // Pause

  if([now,start,fixWork,pause].some(isNaN)){
    err.textContent="Bitte Anfragezeit, Dienstbeginn, Dienstzeit (fix) und Pause im Format hh:mm eingeben.";
    byId("r3_res").style.display="none";
    return;
  }

  const endWithShower = now + DUSCH_MIN;
  const presence = diffClock(endWithShower, start);
  const tageszettel = Math.max(0, presence - pause);

  const regEnd = start + fixWork + pause;
  const take = Math.max(0, diffClock(regEnd, endWithShower));

  byId("r3_tz").textContent = formatDuration(tageszettel);
  byId("r3_tz_dec").textContent = fmtDec(tageszettel);
  byId("r3_end").textContent = formatClock(endWithShower);

  // Zusatzzeile: Beginn Duschzeit (Anfragezeit)
  const ds = byId("r3_duschstart");
  if(ds) ds.textContent = formatClock(now);

  byId("r3_take").textContent = formatDuration(take);
  byId("r3_take_dec").textContent = fmtDec(take);

  byId("r3_res").style.display="block";
}

function r3_reset(){
    document.getElementById("r3_now").value="";
    document.getElementById("r3_start").value="";
    document.getElementById("r3_fixWork").value="07:48";
    document.getElementById("r3_pause").value="00:30";
    document.getElementById("r3_err").textContent="";
    document.getElementById("r3_res").style.display="none";
  }

  // === Rechner 4 ===
  function r4_updateMode(){
    const mode=document.getElementById("r4_mode").value;
    const extRow=document.getElementById("r4_ext_row");
    const targetRow=document.getElementById("r4_target_row");
    const target10Row=document.getElementById("r4_target10_row");
    const target12Row=document.getElementById("r4_target12_row");

    // defaults
    extRow.style.display="none";
    targetRow.style.display="none";
    if(target10Row) target10Row.style.display="none";
    target12Row.style.display="none";

    if(mode==="ext"){
      extRow.style.display="flex";
    }else if(mode==="target"){
      targetRow.style.display="flex";
    }else if(mode==="target10plus45"){
      if(target10Row) target10Row.style.display="block";
    }else if(mode==="target12inc"){
      target12Row.style.display="block";
    }
  }
  document.getElementById("r4_mode").addEventListener("change", r4_updateMode);
  r4_updateMode();

  function r4_calc(){
    const err=document.getElementById("r4_err");
    const res=document.getElementById("r4_res");
    const note=document.getElementById("r4_note");
    err.textContent=""; note.style.display="none"; note.className="note"; note.textContent="";

    const start=parseTimeToMinutes(document.getElementById("r4_start").value);
    if(Number.isNaN(start)){
      err.textContent="Bitte Dienstbeginn eingeben.";
      res.style.display="none";
      return;
    }

    const mode=document.getElementById("r4_mode").value;
    let extWarn=false;
    const extWarnText="‚ö†Ô∏è Schichtverl√§ngerung eingetragen, aber es ist ‚ÄûKein Rundspruch‚Äú gew√§hlt. Bitte zuerst einen Rundspruch ausw√§hlen. Solange ‚ÄûKein Rundspruch‚Äú gew√§hlt ist, wird die Schichtverl√§ngerung nicht ber√ºcksichtigt.";
    const extVal=document.getElementById("r4_ext").value;
    let extTotal=parseTimeToMinutes(extVal);
    if(Number.isNaN(extTotal)) extTotal=0;
    if (extTotal>0 && mode==="none") {
      // Schichtverl√§ngerung nur im Bitte Rundspruch w√§hlen erlaubt
      note.style.display="block";
      note.className="note warn";
      note.textContent = extWarnText;
      res.style.display="none";
      return;
    }
    let tageszettelMin = BASE_WORK_MIN;
    let pauseMin = pauseByArbzg(tageszettelMin);
    let endMin = start + tageszettelMin + pauseMin;

    if(mode==="ext"){
      const extTotal=parseTimeToMinutes(document.getElementById("r4_ext").value);
      const extTotalMin = Number.isNaN(extTotal) ? 0 : extTotal;

      // Schichtverl√§ngerung ist "gesamt" laut Rundspruch.
      // Wenn dadurch reine Arbeitszeit > 9:00 wird: innerhalb der Verl√§ngerung sind 15 Min Pause enthalten.
      let workCandidate = BASE_WORK_MIN + extTotalMin;
      const needs15InExt = (extTotalMin > 0 && workCandidate > LIMIT_9H);

      const extWork = needs15InExt ? Math.max(0, extTotalMin - 15) : extTotalMin;
      tageszettelMin = BASE_WORK_MIN + extWork;

      pauseMin = pauseByArbzg(tageszettelMin);
      endMin = start + tageszettelMin + pauseMin;

      note.style.display="block";
      if(pauseMin===PAUSE_45){
        note.className="note warn";
        note.textContent="‚ö†Ô∏è Reine Arbeitszeit √ºber 9:00 h ‚Üí mindestens 45 Minuten Pause erforderlich.";
      }else{
        note.className="note ok";
        note.textContent="‚úÖ Bis 9:00 h reine Arbeitszeit ‚Üí 30 Minuten Pause ausreichend.";
      }
    }
    else if(mode==="target"){
      const target=parseTimeToMinutes(document.getElementById("r4_target").value);
      if(Number.isNaN(target)){
        err.textContent="Bitte Ziel-Arbeitszeit eingeben.";
        res.style.display="none";
        return;
      }
      tageszettelMin = target;
      pauseMin = pauseByArbzg(tageszettelMin);
      endMin = start + tageszettelMin + pauseMin;

      note.style.display="block";
      if(pauseMin===PAUSE_45){
        note.className="note warn";
        note.textContent="‚ö†Ô∏è Reine Arbeitszeit √ºber 9:00 h ‚Üí mindestens 45 Minuten Pause erforderlich.";
      }else{
        note.className="note ok";
        note.textContent="‚úÖ Bis 9:00 h reine Arbeitszeit ‚Üí 30 Minuten Pause ausreichend.";
      }
    }

    else if(mode==="target10plus45"){
      // Rundspruch: "Arbeitszeitverl√§ngerung auf 10:00 (+ 0:45 Pause)"
      // -> Arbeitszeit (Tageszettel) = 10:00
      // -> Pause = 0:45 (fest, kommt dazu)
      // -> Anwesenheitszeit (Start->Ende) = 10:45
      const workMin = 10 * 60;
      pauseMin = PAUSE_45;
      tageszettelMin = workMin;
      endMin = start + workMin + pauseMin;

      note.style.display="block";
      note.className="note warn";
      note.textContent="‚ö†Ô∏è Rundspruch 10:00 h: die 10:00 sind Arbeitszeit, Pause 0:45 kommt dazu (Duschzeit z√§hlt als Arbeitszeit).";
    }
    else if(mode==="target12inc"){
      // Rundspruch: "Arbeitszeitverl√§ngerung auf 12h" ‚Äì die 12:00 beinhalten bereits die 45 Minuten Pause.
      // -> Anwesenheitszeit (Start->Ende) = 12:00
      // -> Pause = 0:45 (fest)
      // -> Tageszettel (reine Arbeitszeit) = 12:00 - 0:45 = 11:15
      const totalMin = 12 * 60;
      pauseMin = PAUSE_45;
      tageszettelMin = totalMin - pauseMin;
      endMin = start + totalMin;

      note.style.display="block";
      note.className="note warn";
      note.textContent="‚ö†Ô∏è Rundspruch 12:00 h: die 45 Minuten Pause sind bereits enthalten. Tageszettel = 11:15 h.";
    }
    else {
      // none
      tageszettelMin = BASE_WORK_MIN;
      pauseMin = pauseByArbzg(tageszettelMin);
      endMin = start + tageszettelMin + pauseMin;

      note.style.display="block";
      note.className="note ok";
      note.textContent="‚úÖ Standard: 7:48 h Arbeitszeit (Pause nach ArbZG automatisch 0:30).";
    }

    document.getElementById("r4_end").textContent = formatClock(endMin);
    const showerStartMin = endMin - DUSCH_MIN;
    document.getElementById("r4_shower").textContent = formatClock(showerStartMin);
    document.getElementById("r4_tz").textContent = formatDuration(tageszettelMin);
    document.getElementById("r4_tz_dec").textContent = fmtDec(tageszettelMin);
    
    const r4_naz = Math.min(tageszettelMin, BASE_WORK_MIN);
    const r4_anaz = Math.max(0, tageszettelMin - BASE_WORK_MIN);
    document.getElementById("r4_naz").textContent = formatDuration(r4_naz);
    document.getElementById("r4_anaz").textContent = formatDuration(r4_anaz);
document.getElementById("r4_pause").textContent = formatDuration(pauseMin);
    res.style.display="block";
  }
  function r4_reset(){
    document.getElementById("r4_start").value="";
    document.getElementById("r4_mode").value="none";
    document.getElementById("r4_ext").value="00:00";
    document.getElementById("r4_target").value="10:00";
    document.getElementById("r4_err").textContent="";
    document.getElementById("r4_res").style.display="none";
    r4_updateMode();
    const noteEl = document.getElementById("r4_note");
    noteEl.style.display="none";
    noteEl.textContent="";
    noteEl.className="note";
  }

  // === Rechner 5 ===
  function r5_calc(){
    const err=document.getElementById("r5_err");
    const res=document.getElementById("r5_res");
    const note=document.getElementById("r5_note");
    err.textContent=""; note.style.display="none"; note.className="note"; note.textContent="";

    const start=parseTimeToMinutes(document.getElementById("r5_start").value);
    const paper=parseTimeToMinutes(document.getElementById("r5_paper").value);
    if(Number.isNaN(start)||Number.isNaN(paper)){
      err.textContent="Bitte Dienstbeginn und Beginn Duschzeit eingeben.";
      res.style.display="none";
      return;
    }
    const end = paper + DUSCH_MIN;
    const presence = diffClock(end, start);

    // Pause automatisch
    const pause = ((presence - PAUSE_30) > LIMIT_9H) ? PAUSE_45 : PAUSE_30;
    const tageszettel = Math.max(0, presence - pause);

    document.getElementById("r5_end").textContent = formatClock(end);
    document.getElementById("r5_shower").textContent = formatClock(paper);
    document.getElementById("r5_pause").textContent = formatDuration(pause);
    document.getElementById("r5_tz").textContent = formatDuration(tageszettel);
    document.getElementById("r5_tz_dec").textContent = fmtDec(tageszettel);

    const r5_naz = Math.min(tageszettel, BASE_WORK_MIN);
    const r5_anaz = Math.max(0, tageszettel - BASE_WORK_MIN);
    document.getElementById("r5_naz").textContent = formatDuration(r5_naz);
    document.getElementById("r5_anaz").textContent = formatDuration(r5_anaz);
note.style.display="block";
    if(pause===PAUSE_45){
      note.className="note warn";
      note.textContent="‚ö†Ô∏è Reine Arbeitszeit √ºber 9:00 h ‚Üí 45 Minuten Pause erforderlich (automatisch ber√ºcksichtigt).";
    }else{
      note.className="note ok";
      note.textContent="‚úÖ Bis 9:00 h reine Arbeitszeit ‚Üí 30 Minuten Pause ausreichend (automatisch ber√ºcksichtigt).";
    }

    res.style.display="block";
  }
  function r5_reset(){
    document.getElementById("r5_start").value="";
    document.getElementById("r5_paper").value="";
    document.getElementById("r5_err").textContent="";
    document.getElementById("r5_res").style.display="none";
  }

  // === Enter-Taste l√∂st Berechnen aus (PC) ===
  const calcMap = {
    r1: r1_calc,
    r2: r2_calc,
    r3: r3_calc,
    r4: r4_calc,
    r5: r5_calc,
    // r6 hat keine Berechnen-Taste
  };
  document.querySelectorAll('section.card[data-calc]').forEach(card=>{
    const key = card.getAttribute('data-calc');
    const fn = calcMap[key];
    if(!fn) return;
    card.querySelectorAll('input, select').forEach(el=>{
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter'){
          e.preventDefault();
          fn();
        }
      });
    });
  });
</script>
<div class="global-footer">
<div><b>Mobil-Link (Handy + PC):</b> <a href="https://bovidum.github.io/rechner/" rel="noopener" target="_blank">https://bovidum.github.io/rechner/</a></div>
<div class="small">
      Offline nutzen: hier laden: <a download="Zeitrechner.html" href="Zeitrechner.html">Zeitrechner herunterladen</a> (funktioniert ohne Internet auf Handy + PC).
    </div>
<div class="small">
      Excel-Download f√ºr PC: <a download="Zeit_Rechner_V6.xlsm" href="Zeit_Rechner_V6.xlsm">Zeit_Rechner_V6.xlsm herunterladen</a>
</div>
</div>
</div></body>
</html>
